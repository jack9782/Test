{"version":3,"file":"js/759-legacy.4fa3d553.js","mappings":"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","sources":["webpack://vue-test2/./src/views/KMB_Route.vue?3448","webpack://vue-test2/src/views/KMB_Route.vue","webpack://vue-test2/./src/views/KMB_Route.vue?c3b6","webpack://vue-test2/./src/views/KMB_Route.vue","webpack://vue-test2/./node_modules/core-js/modules/es.array.find.js","webpack://vue-test2/./node_modules/core-js/modules/es.array.splice.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('h4',[_vm._v(_vm._s(_vm.route)+\" \"+_vm._s(_vm.origin)+\" 往 \"+_vm._s(_vm.destination))]),_c('div',{staticClass:\"stop-list\"},[_c('table',{staticClass:\"table text-left\"},[_vm._m(0),_c('tbody',_vm._l((_vm.current_route_stop_list),function(stop){return _c('tr',{key:stop.id,on:{\"click\":function($event){return _vm.stop_click(stop.seq, this)}}},[_c('td',{staticClass:\"td-seq\"},[(!(stop.star))?_c('img',{attrs:{\"src\":require(\"@/assets/star.png\"),\"width\":\"25px\"},on:{\"click\":function($event){return _vm.star_click(stop.seq)}}}):_vm._e(),(stop.star)?_c('img',{attrs:{\"src\":require(\"@/assets/starred.png\"),\"width\":\"25px\"},on:{\"click\":function($event){return _vm.star_click(stop.seq)}}}):_vm._e(),_c('span',[_vm._v(\" \"+_vm._s(stop.seq))])]),_c('td',[_c('div',{class:[stop.seq == _vm.stop_seq_clicked ? \"font-weight-bold\": '']},[_vm._v(_vm._s(stop.name_tc))]),(_vm.stop_seq_clicked == stop.seq)?_c('div',[(!(stop.eta_1 || stop.eta_2 || stop.eta_3) && _vm.eta_loaded)?_c('div',[_vm._v(\" 暫時沒有預定班次 \")]):_vm._e(),(stop.eta_1)?_c('div',[_c('span',{staticClass:\"eta-time-diff\"},[_vm._v(_vm._s(stop.eta_1.time_diff))]),_c('span',{staticClass:\"eta-time-diff-desc\"},[_vm._v(\" 分鐘\")]),_c('span',{staticClass:\"eta-time\"},[_vm._v(\" (\"+_vm._s(stop.eta_1.time)+\")\")]),(stop.eta_1.rmk_tc)?_c('span',{staticClass:\"eta-rmk\"},[_vm._v(\" (\"+_vm._s(stop.eta_1.rmk_tc)+\")\")]):_vm._e()]):_vm._e(),(stop.eta_2)?_c('div',[_c('span',{staticClass:\"eta-time-diff\"},[_vm._v(_vm._s(stop.eta_2.time_diff))]),_c('span',{staticClass:\"eta-time-diff-desc\"},[_vm._v(\" 分鐘\")]),_c('span',{staticClass:\"eta-time\"},[_vm._v(\" (\"+_vm._s(stop.eta_2.time)+\")\")]),(stop.eta_2.rmk_tc)?_c('span',{staticClass:\"eta-rmk\"},[_vm._v(\" (\"+_vm._s(stop.eta_2.rmk_tc)+\")\")]):_vm._e()]):_vm._e(),(stop.eta_3)?_c('div',[_c('span',{staticClass:\"eta-time-diff\"},[_vm._v(_vm._s(stop.eta_3.time_diff))]),_c('span',{staticClass:\"eta-time-diff-desc\"},[_vm._v(\" 分鐘\")]),_c('span',{staticClass:\"eta-time\"},[_vm._v(\" (\"+_vm._s(stop.eta_3.time)+\")\")]),(stop.eta_3.rmk_tc)?_c('span',{staticClass:\"eta-rmk\"},[_vm._v(\" (\"+_vm._s(stop.eta_3.rmk_tc)+\")\")]):_vm._e()]):_vm._e()]):_vm._e()])])}),0)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"站數\")]),_c('th',[_vm._v(\"巴士站\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"container\">\r\n        <h4>{{route}} {{origin}} 往 {{destination}}</h4>\r\n\r\n        <div class=\"stop-list\">\r\n            <table class=\"table text-left\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>站數</th>\r\n                        <th>巴士站</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"stop in current_route_stop_list\" :key=\"stop.id\" @click=\"stop_click(stop.seq, this)\">\r\n                        <td class=\"td-seq\">\r\n                            <!--input type=\"image\" class=\"star mr-2\" width=\"25px\" src=\"../assets/star.png\" style=\"vertical-align: middle\"-->\r\n                            <!--img src=\"@/assets/star.png\" width=\"25px\" @click=\"star_click(stop.seq)\"-->\r\n                            <img src=\"@/assets/star.png\" v-if=\"!(stop.star)\" width=\"25px\" @click=\"star_click(stop.seq)\">\r\n                            <img src=\"@/assets/starred.png\" v-if=\"stop.star\" width=\"25px\" @click=\"star_click(stop.seq)\">\r\n                            <span> {{ stop.seq }}</span>\r\n                        </td>\r\n                        <td>\r\n                            <div :class=\"[stop.seq == stop_seq_clicked ? `font-weight-bold`: '']\">{{ stop.name_tc }}</div>\r\n                            <div v-if=\"stop_seq_clicked == stop.seq\">\r\n                                <div v-if=\"!(stop.eta_1 || stop.eta_2 || stop.eta_3) && eta_loaded\">\r\n                                    暫時沒有預定班次\r\n                                </div>\r\n                                <div v-if=\"stop.eta_1\">\r\n                                    <span class=\"eta-time-diff\">{{ stop.eta_1.time_diff }}</span><span class=\"eta-time-diff-desc\"> 分鐘</span>\r\n                                    <span class=\"eta-time\"> ({{ stop.eta_1.time }})</span>\r\n                                    <span class=\"eta-rmk\" v-if=\"stop.eta_1.rmk_tc\"> ({{ stop.eta_1.rmk_tc }})</span>\r\n                                </div>\r\n                                <div v-if=\"stop.eta_2\">\r\n                                    <span class=\"eta-time-diff\">{{ stop.eta_2.time_diff }}</span><span class=\"eta-time-diff-desc\"> 分鐘</span>\r\n                                    <span class=\"eta-time\"> ({{ stop.eta_2.time }})</span>\r\n                                    <span class=\"eta-rmk\" v-if=\"stop.eta_2.rmk_tc\"> ({{ stop.eta_2.rmk_tc }})</span>\r\n                                </div>\r\n                                <div v-if=\"stop.eta_3\">\r\n                                    <span class=\"eta-time-diff\">{{ stop.eta_3.time_diff }}</span><span class=\"eta-time-diff-desc\"> 分鐘</span>\r\n                                    <span class=\"eta-time\"> ({{ stop.eta_3.time }})</span>\r\n                                    <span class=\"eta-rmk\" v-if=\"stop.eta_3.rmk_tc\"> ({{ stop.eta_3.rmk_tc }})</span>\r\n                                </div>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as util from '../util/util'\r\n\r\nexport default {\r\n    name: 'KMB_ETA',\r\n    data(){\r\n        return {\r\n            route: this.$route.params.route,\r\n            bound: this.$route.params.bound,\r\n            service_type: this.$route.params.service_type,\r\n            origin: \"\",\r\n            destination: \"\",\r\n            stop_list: [],\r\n            route_list: [],\r\n            route_stop_list: [],\r\n            current_route_stop_list: [],\r\n            stop_seq_clicked: 0,\r\n            eta_loaded: false,\r\n        }\r\n    },\r\n    computed: {\r\n        star_image_src: function(){\r\n            return this.current_route_stop_list.map(function(route_stop){\r\n                if (route_stop.star){\r\n                    return \"../assets/star.png\";\r\n                }\r\n                else {\r\n                    return \"../assets/star.png\";\r\n                }\r\n            });\r\n        }\r\n    },\r\n    mounted() {\r\n        let that = this;\r\n        \r\n        // Load route destination\r\n        (async () => {\r\n            await util.getKMBRouteList()\r\n            this.route_list = JSON.parse(localStorage.getItem(\"KMBRouteList\"))\r\n            let route_list_find = this.route_list.find(route_item => route_item.route == this.route && route_item.bound == this.bound && route_item.service_type == this.service_type);\r\n            if (route_list_find){\r\n                this.origin = route_list_find.orig_tc;\r\n                this.destination = route_list_find.dest_tc;\r\n            }\r\n            else {\r\n                // route not found\r\n                location.href = \"/KMB\"\r\n            }\r\n        })();\r\n\r\n        // Load stop list table        \r\n        (async () => {\r\n            await util.getKMBRouteStopList()\r\n            that.loadStop();\r\n        })();\r\n\r\n        setInterval(() => { \r\n            if (this.eta_loaded){\r\n                this.stop_click(this.stop_seq_clicked) ;\r\n            }\r\n        }, 10000);\r\n\r\n    },\r\n    methods: {\r\n        loadStop: function(){\r\n            let all_route_stop_list = JSON.parse(localStorage.getItem(\"KMBRouteStopList\"));\r\n            let stop_list = JSON.parse(localStorage.getItem(\"KMBStopList\"));\r\n            \r\n            let route_stop_list = all_route_stop_list.filter(route_stop => route_stop.route == this.route && route_stop.bound == this.bound && route_stop.service_type == this.service_type);\r\n            \r\n            // map route_stop_list and stop_list\r\n            this.current_route_stop_list = route_stop_list.map((e) => {\r\n                let temp = stop_list.find(stop => stop.stop == e.stop)\r\n                \r\n                if (temp.stop){\r\n                    e.name_tc = temp.name_tc;\r\n                }\r\n                return e;\r\n            });\r\n            \r\n            \r\n            // map current_route_stop_list and starred list\r\n            // TODO\r\n            let star_list = JSON.parse(localStorage.getItem(\"KMBRouteStopStar\"));\r\n            if (star_list){\r\n\r\n                this.current_route_stop_list = this.current_route_stop_list.map((e) => {\r\n                    \r\n                    let found = star_list.find(star => (star.route == e.route &&\r\n                                                        star.bound == e.bound &&\r\n                                                        star.service_type == e.service_type &&\r\n                                                        star.seq == e.seq)\r\n                    );                                 \r\n\r\n                    if (found){\r\n                        e.star = true;\r\n                    }\r\n                    else {\r\n                        e.star = false;\r\n                    }\r\n                    \r\n                    return e;\r\n                });               \r\n            }\r\n\r\n        },\r\n        stop_click: function(stop_seq){\r\n            // load ETA\r\n            this.stop_seq_clicked = stop_seq;\r\n\r\n            (async () => {\r\n                let eta_data = await util.getKMBRouteETA(this.route, this.service_type);\r\n                eta_data = eta_data.data;\r\n                let eta_1 = eta_data.find(eta => eta.route == this.route &&\r\n                                                 eta.dir == this.bound &&\r\n                                                 eta.service_type == this.service_type &&\r\n                                                 eta.seq == stop_seq &&\r\n                                                 eta.eta_seq == 1);\r\n                let eta_2 = eta_data.find(eta => eta.route == this.route &&\r\n                                                 eta.dir == this.bound &&\r\n                                                 eta.service_type == this.service_type &&\r\n                                                 eta.seq == stop_seq &&\r\n                                                 eta.eta_seq == 2);\r\n                let eta_3 = eta_data.find(eta => eta.route == this.route &&\r\n                                                 eta.dir == this.bound &&\r\n                                                 eta.service_type == this.service_type &&\r\n                                                 eta.seq == stop_seq &&\r\n                                                 eta.eta_seq == 3);\r\n\r\n                this.eta_loaded = true;\r\n\r\n                // map eta to route stop list\r\n                this.current_route_stop_list = this.current_route_stop_list.map((e) => {\r\n                    if (eta_1.eta){\r\n                        e.eta_1 = eta_1;\r\n                        e.eta_1.time = util.formatTime(eta_1.eta);\r\n                        e.eta_1.time_diff = util.etaTimeDifference(eta_1.eta);\r\n                    }\r\n                    if (eta_2.eta){\r\n                        e.eta_2 = eta_2;\r\n                        e.eta_2.time = util.formatTime(eta_2.eta);\r\n                        e.eta_2.time_diff = util.etaTimeDifference(eta_2.eta);\r\n                    }\r\n                    if (eta_3.eta){\r\n                        e.eta_3 = eta_3;\r\n                        e.eta_3.time = util.formatTime(eta_3.eta);\r\n                        e.eta_3.time_diff = util.etaTimeDifference(eta_3.eta);\r\n                    }\r\n                    \r\n                    return e;\r\n                });\r\n\r\n                this.eta_loaded = true;\r\n\r\n            })();\r\n            \r\n        },\r\n        star_click: function(stop_seq){\r\n            let that = this;\r\n\r\n            // find the stop object\r\n            let stop_item = {\r\n                route: that.route,\r\n                bound: that.bound,\r\n                service_type: that.service_type,\r\n                seq: stop_seq\r\n            };\r\n\r\n            // if found in star list, remove the starred item from the list, and change the image src\r\n            // else add the item to star list, and change the image src\r\n\r\n            let star_list = localStorage.getItem(\"KMBRouteStopStar\");\r\n            star_list = JSON.parse(star_list);\r\n\r\n            if (!star_list){\r\n                star_list = [];\r\n            }\r\n            let star_item_index = -1;\r\n\r\n            // find the index of object with starred item\r\n            for (let i = 0; i < star_list.length; i++){\r\n                if ((star_list[i]).route == stop_item.route &&\r\n                    (star_list[i]).bound == stop_item.bound &&\r\n                    (star_list[i]).service_type == stop_item.service_type &&\r\n                    (star_list[i]).seq == stop_item.seq){\r\n                    star_item_index = i;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            // starred --> unstar\r\n            if (star_item_index > -1){\r\n                star_list.splice(star_item_index, 1);\r\n\r\n                // update current_route_stop_list star to false\r\n                for (let i = 0; i < this.current_route_stop_list.length; i++){\r\n                    let item = this.current_route_stop_list[i];\r\n                    if (item.route == stop_item.route &&\r\n                        item.bound == stop_item.bound && \r\n                        item.service_type == stop_item.service_type &&\r\n                        item.seq == stop_item.seq){\r\n\r\n                        (this.current_route_stop_list[i]).star = false;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {  // unstar --> starred\r\n                star_list.push(stop_item);\r\n\r\n                // update current_route_stop_list star to true\r\n                // update current_route_stop_list star to false\r\n                for (let i = 0; i < this.current_route_stop_list.length; i++){\r\n                    let item = this.current_route_stop_list[i];\r\n                    if (item.route == stop_item.route &&\r\n                        item.bound == stop_item.bound && \r\n                        item.service_type == stop_item.service_type &&\r\n                        item.seq == stop_item.seq){\r\n                        \r\n                        (this.current_route_stop_list[i]).star = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            localStorage.setItem(\"KMBRouteStopStar\", JSON.stringify(star_list));\r\n\r\n        },\r\n\r\n    },\r\n\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.td-seq {\r\n    width: 100px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./KMB_Route.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./KMB_Route.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./KMB_Route.vue?vue&type=template&id=a7ee8746&scoped=true&\"\nimport script from \"./KMB_Route.vue?vue&type=script&lang=js&\"\nexport * from \"./KMB_Route.vue?vue&type=script&lang=js&\"\nimport style0 from \"./KMB_Route.vue?vue&type=style&index=0&id=a7ee8746&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a7ee8746\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar TypeError = global.TypeError;\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","route","origin","destination","_m","_l","stop","key","id","on","$event","stop_click","seq","_e","attrs","star_click","class","stop_seq_clicked","name_tc","eta_1","eta_2","eta_3","eta_loaded","time_diff","time","rmk_tc","staticRenderFns","name","data","bound","service_type","stop_list","route_list","route_stop_list","current_route_stop_list","computed","star_image_src","mounted","util","route_list_find","location","that","setInterval","methods","loadStop","e","star","eta_data","eta","star_list","star_item_index","item","localStorage","component","$","$find","addToUnscopables","FIND","SKIPS_HOLES","Array","target","proto","forced","find","callbackfn","arguments","length","undefined","global","toAbsoluteIndex","toIntegerOrInfinity","lengthOfArrayLike","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","TypeError","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","actualStart","argumentsLength"],"sourceRoot":""}